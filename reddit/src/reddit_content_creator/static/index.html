<body>
    <input id="subreddit-field" type="text" placeholder="Subreddit">
    <input id="post-subject-field" type="text" placeholder="Post Subject">
    <button id="submit-button" onclick="getPost()">Submit</button>
    <p id="response"></p>

    <script>
        const submitButton = document.getElementById('submit-button');
        const responseElt = document.getElementById('response');
        const subredditElt = document.getElementById('subreddit-field');
        const postSubjectElt = document.getElementById('post-subject-field');
        const getPost = () => {
            submitButton.disabled = true;
            subredditElt.disabled = true;
            postSubjectElt.disabled = true;
            responseElt.innerText = 'Loading...';

            const subreddit = subredditElt.value;
            const postSubject = postSubjectElt.value;
            const post = {
                subreddit,
                post_subject: postSubject
            }
            fetch('/', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(post)
            }).then(response => {
                if (response.ok) {
                    return response.text();
                }
                throw new Error('Request failed');
            }).then(data => {
                responseElt.innerText = data;
            })
        }
    </script>
</body>